<!doctype html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ“ Soáº¡n cÃ¢u há»i</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;600;700&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">

  <!-- CSS tÃ¡ch riÃªng -->
  <link rel="stylesheet" href="quiz-editor.css">
</head>

<body>
  <div class="container">
    <header>
      <h1>ğŸ“ Soáº¡n cÃ¢u há»i</h1>
    </header>

    <div class="top-actions">
      <button class="btn-success" id="btnLoadSample"><span>ğŸ“‹ Dá»¯ liá»‡u máº«u</span></button>
      <button class="btn-primary" id="btnSaveAll"><span>ğŸ’¾ LÆ°u</span></button>
      <button class="btn-secondary" id="btnExportJSON"><span>ğŸ“¤ Xuáº¥t JSON</span></button>

      <button class="btn-secondary" id="btnOpenJSON"><span>ğŸ“‚ Má»Ÿ JSON</span></button>
      <input type="file" id="fileInput" accept=".json" style="display:none">

      <button class="btn-primary" id="btnExportStandalone"><span>ğŸ“¦ Xuáº¥t Game</span></button>
    </div>

    <div class="main">
      <!-- Sidebar -->
      <aside class="card card-pad sidebar">
        <div class="sidebar-tabs">
          <button class="tab-btn active" data-tab="tabQuestions">
            ğŸ“š Danh sÃ¡ch cÃ¢u há»i <span id="qCount" style="opacity:.7">(0)</span>
          </button>
          <button class="tab-btn" data-tab="tabConfig">
            âš™ Cáº¥u hÃ¬nh
          </button>
        </div>

        <div id="tabQuestions" class="tab-content active">
        <!-- List controls: search + select all -->
        <div class="q-list-tools">
          <input id="qSearch" type="text" placeholder="ğŸ” TÃ¬m cÃ¢u há»i..." />
          <label class="q-selectall">
            <input type="checkbox" id="qSelectAll" />
            <span>Chá»n táº¥t cáº£ (Export)</span>
          </label>
        </div>

        <div class="q-list" id="qList"></div>

        <div style="display:flex;gap:.6rem;margin-top:1rem;flex-wrap:wrap">
          <button class="btn-primary" style="flex:1" id="btnAddQuestion"><span>â• ThÃªm</span></button>
          <button class="btn-delete" style="flex:1" id="btnClearAll"><span>ğŸ§¹ XÃ³a táº¥t cáº£</span></button>
        </div>

        <p class="hint" style="margin-top:1rem">
          ğŸ’¡ Tip: TÃ­ch checkbox â€œExportâ€ Ä‘á»ƒ chá»n cÃ¢u há»i Ä‘Æ°á»£c xuáº¥t ra game standalone.
        </p>

        </div>
        <div id="tabConfig" class="tab-content">
        <hr class="soft" />

        <!-- Student meta -->
        <div class="section-title" style="margin-top:0">ğŸ‘©â€ğŸ“ ThÃ´ng tin lá»›p</div>
        <div class="row" style="grid-template-columns:1fr;gap:.6rem">
          <div>
            <label>Lá»›p</label>
            <input type="text" id="metaClass" placeholder="VÃ­ dá»¥: 7A1" />
          </div>
          <div>
            <label>Danh sÃ¡ch tÃªn (má»—i dÃ²ng 1 tÃªn)</label>
            <textarea id="metaNames" placeholder="Nguyá»…n VÄƒn A\nTráº§n Thá»‹ B\n..." style="min-height:120px"></textarea>
          </div>
        </div>

        <hr class="soft" />

        <!-- Google Sheet API config -->
        <div class="section-title" style="margin-top:0">ğŸ“„ Cáº¥u hÃ¬nh Google Sheet API</div>
        <p class="hint" style="margin-top:.25rem">
          1) Táº¡o Google Apps Script â†’ dÃ¡n code dÆ°á»›i Ä‘Ã¢y â†’ Deploy (Web app) â†’ Access: Anyone.<br>
          2) DÃ¡n <b>link Web App</b> vÃ o Ã´ bÃªn dÆ°á»›i. Khi há»c sinh ná»™p xong, há»‡ thá»‘ng sáº½ gá»­i: tÃªn, lá»›p, Ä‘iá»ƒm, thá»i gian, ngÃ y lÃ m.
        </p>
        <pre class="codebox" id="apiCodeBox"></pre>
        <div style="display:flex;gap:.6rem;align-items:center;margin:.6rem 0 .2rem">
          <button class="btn-secondary" id="btnCopyApiCode" style="flex:0 0 auto">ğŸ“‹ Copy code</button>
          <span class="hint" style="margin:0">(Copy rá»“i dÃ¡n vÃ o Apps Script)</span>
        </div>
        <label>Link Google API (Web App URL)</label>
        <input type="url" id="googleApiUrl" placeholder="https://script.google.com/macros/s/.../exec" />
      </div>
      </aside>

      <!-- Editor -->
      <section class="card card-pad">
        <div class="editor-header">
          <div class="editor-title" id="editorTitle">âœï¸ Táº¡o cÃ¢u há»i má»›i</div>
          <div class="inline">
            <span class="hint">ID: <span id="qid">â€”</span></span>
          </div>
        </div>

        <div class="section-title">ğŸ“Œ ThÃ´ng tin cÆ¡ báº£n</div>

        <div class="row" style="margin-bottom:1rem">
          <div>
            <label>Loáº¡i cÃ¢u há»i</label>
            <select id="questionType">
              <option value="multiple-choice">Tráº¯c nghiá»‡m (Multiple Choice)</option>
              <option value="true-false-grid">LÆ°á»›i ÄÃºng/Sai (True/False Grid)</option>
              <option value="matching">GhÃ©p ná»‘i (Matching)</option>
              <option value="ordering">Sáº¯p xáº¿p (Ordering)</option>
              <option value="fill-blanks">Äiá»n khuyáº¿t (Fill-blanks)</option>
              <option value="hotspot">Hotspot (SVG Overlay)</option>
            </select>
          </div>

          <div style="align-self:end">
            <div class="checkbox" title="CÃ¢u há»i nÃ y sáº½ Ä‘Æ°á»£c Ä‘Æ°a vÃ o Export Standalone">
              <input type="checkbox" id="exportFlag" checked />
              <span>Export</span>
            </div>
          </div>
        </div>

        <!-- Question text + media -->
        <div class="row">
          <div>
            <label>CÃ¢u há»i</label>
            <textarea id="questionText" placeholder="Nháº­p ná»™i dung cÃ¢u há»i..."></textarea>
            <div id="qThumb" class="thumbnail-preview" style="display:none"></div>
          </div>

          <div class="media-tools">
            <button class="media-btn" id="btnPickQuestionImg">ğŸ–¼ï¸ Chá»n áº£nh</button>
            <input type="file" id="file_question" accept="image/*" style="display:none">
          </div>
        </div>

        <div class="hint" style="margin-top:.5rem">
          â€¢ Báº¡n cÃ³ thá»ƒ <b>Paste áº£nh (Ctrl+V)</b> khi Ä‘ang focus vÃ o Ã´ â€œCÃ¢u há»iâ€ Ä‘á»ƒ chÃ¨n nhanh.<br>
          â€¢ áº¢nh sáº½ Ä‘Æ°á»£c nÃ©n trÆ°á»›c khi lÆ°u LocalStorage (trÃ¡nh vÆ°á»£t 5MB).
        </div>

        <!-- Dynamic area per question type -->
        <div id="dynamicContent"></div>

        <div class="inline" style="margin-top:1.25rem;gap:.7rem;flex-wrap:wrap">
          <button class="btn-success" id="btnSaveQuestion"><span id="saveBtnText">ğŸ’¾ LÆ°u cÃ¢u há»i</span></button>
          <button class="btn-secondary" id="btnCancelEdit"><span>âŒ Há»§y</span></button>
        </div>
      </section>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast">
    <div class="t-title" id="toastTitle">ThÃ´ng bÃ¡o</div>
    <div class="t-msg" id="toastMsg"></div>
  </div>

  <!-- (Optional) Template game nhÃºng (náº¿u báº¡n dÃ¹ng export standalone theo kiá»ƒu replace placeholder) -->
  <script type="text/plain" id="quizGameTemplate"></script>

  <!-- JS tÃ¡ch riÃªng -->
  <script src="quiz-editor.js"></script>
</body>
</html>
